<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Vittorio Picone - Terminal</title>

    <script src="https://cdn.tailwindcss.com"></script>

    <script type="importmap">
        {
            "imports": {
                "react": "https://esm.sh/react@18.2.0",
                "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
                "lucide-react": "https://esm.sh/lucide-react@0.468.0?external=react,react-dom"
            }
        }
    </script>

    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500;600;700&display=swap');

        :root {
            --terminal-green: #00ff00;
            --terminal-bg: #0a0a0a;
            --terminal-glow: rgba(0, 255, 0, 0.5);
            --scanline-color: rgba(0, 0, 0, 0.5);
        }

        /* FIXED: Use fixed inset-0 to prevent scroll issues on mobile */
        body {
            background-color: var(--terminal-bg);
            color: var(--terminal-green);
            font-family: 'Fira Code', monospace;
            overflow: hidden;
            margin: 0;
            position: fixed;
            inset: 0;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #000;
        }
        ::-webkit-scrollbar-thumb {
            background: #004400;
            border: 1px solid var(--terminal-green);
        }
        ::-webkit-scrollbar-thumb:hover {
            background: var(--terminal-green);
        }

        /* CRT Effects */
        .scanlines {
            background: linear-gradient(
                    to bottom,
                    rgba(255,255,255,0),
                    rgba(255,255,255,0) 50%,
                    rgba(0,0,0,0.2) 50%,
                    rgba(0,0,0,0.2)
            );
            background-size: 100% 4px;
            position: fixed;
            pointer-events: none;
            inset: 0;
            z-index: 50;
        }

        .crt-flicker {
            animation: flicker 0.15s infinite;
            position: fixed;
            inset: 0;
            pointer-events: none;
            background: rgba(0, 255, 0, 0.02);
            z-index: 49;
        }

        @keyframes flicker {
            0% { opacity: 0.97; }
            5% { opacity: 0.95; }
            10% { opacity: 0.9; }
            15% { opacity: 0.95; }
            20% { opacity: 0.99; }
            25% { opacity: 0.95; }
            30% { opacity: 0.9; }
            35% { opacity: 0.96; }
            40% { opacity: 0.98; }
            45% { opacity: 0.95; }
            50% { opacity: 0.99; }
            55% { opacity: 0.93; }
            60% { opacity: 0.9; }
            65% { opacity: 0.96; }
            70% { opacity: 1; }
            75% { opacity: 0.97; }
            80% { opacity: 0.95; }
            85% { opacity: 0.92; }
            90% { opacity: 0.98; }
            95% { opacity: 0.99; }
            100% { opacity: 0.96; }
        }

        .typing-cursor::after {
            content: '‚ñà';
            animation: blink 1s step-end infinite;
            margin-left: 2px;
            opacity: 0.7;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }

        .terminal-text-shadow {
            text-shadow: 0 0 5px var(--terminal-glow);
        }

        /* Retro Image Filter */
        .retro-img {
            filter: grayscale(100%) contrast(1.2) brightness(0.9) sepia(20%) hue-rotate(90deg) saturate(300%);
            border: 1px solid var(--terminal-green);
            transition: all 0.3s ease;
        }
        .retro-img:hover {
            filter: grayscale(0%) contrast(1);
            border-color: #fff;
        }

        /* Utilities */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        input {
            background: transparent;
            border: none;
            color: var(--terminal-green);
            outline: none;
            font-family: 'Fira Code', monospace;
            width: 100%;
            text-shadow: 0 0 5px var(--terminal-glow);
        }

        ::selection {
            background: var(--terminal-green);
            color: black;
        }
    </style>
</head>
<body>
<div id="root"></div>

<script type="text/babel" data-type="module">
    import React, { useState, useEffect, useRef, useLayoutEffect } from 'react';
    import { createRoot } from 'react-dom/client';
    import {
        Terminal, User, Zap, Briefcase, GraduationCap,
        Award, Languages, FolderOpen, Heart, ChevronRight,
        Maximize2, Minimize2, X, AlertCircle, Handshake
    } from 'lucide-react';

    /**
     * DATA CONFIGURATION
     */
    const DATA = {
        profile: {
            name: "Vittorio Picone",
            title: "Computer Science Student & Software Engineer",
            avatar: "https://github.com/VikSn0w.png",
            bio: "Hi, I'm Vittorio Picone! I‚Äôm a passionate Computer Science student and Software Engineer who thrives on building intelligent systems. Whether coding for AI solutions, leading projects, or exploring new challenges, I approach every task with precision and enthusiasm. Beyond coding, I'm a rugby enthusiast and Ducatista, balancing logic with adrenaline on the pitch and the road. Let's create something extraordinary!",
            about: "As a highly skilled and versatile software developer, I bring deep expertise in C/C++/ASM, acquired through my academic career, alongside a strong passion for AI algorithms and computer vision, honed through hands-on work and personal projects.\nI possess extensive knowledge of the Apple Development Ecosystem, particularly with Swift and SwiftUI, and a robust background in full stack development, focusing on PHP, Django, JavaScript, HTML, and MySQL.\nAdditionally, my proficiency in Python, PyQt, Flask, and AI-related libraries empowers me to craft intelligent, dynamic solutions.\nThrough my job experiences, I have developed strong skills in teamwork, team management, and project management, allowing me to effectively lead and collaborate in dynamic environments. I thrive on solving complex problems and am driven to continually expand my technical expertise.",
            location: "Naples, IT",
            currentStudy: "BCompSc at University of Naples \"Parthenope\"",
            email: "vittoriopicone30@gmail.com",
            phone: "+39 3922016432",
            social: {
                github: "https://github.com/VikSn0w",
                linkedin: "https://www.linkedin.com/in/vittorio-picone-916319168",
                instagram: "https://www.instagram.com/vik.desmo"
            }
        },
        skills: [
            { name: "iOS & Swift", level: "Advanced", desc: "Native app development with SwiftUI & UIKit" },
            { name: "AI & Research", level: "Advanced", desc: "Python, PyTorch, Computer Vision" },
            { name: "Low-Level Dev", level: "Academic", desc: "C, C++, Assembly (68k)" },
            { name: "Web Development", level: "Advanced", desc: "React, Flask, Full Stack, Djagno" },
            { name: "Software Engineering", level: "Expert", desc: "System Design, Architecture" },
            { name: "Data Science", level: "Intermediate", desc: "Data Analysis & Regression Models" }
        ],
        experience: [
            {
                name: "Addway Advisory SRL",
                location: "Naples, IT",
                role: "AI Researcher & Developer",
                start: "May 2025",
                end: "Present",
                logo: "images/employer/addway.png",
                description: "As an AI Researcher and Developer, I am responsible for identifying opportunities where artificial intelligence can be applied to automate and enhance work-related tasks across various domains."
            },
            {
                name: "Qualifica Group",
                location: "Naples, IT",
                role: "STEM Teacher",
                start: "May 2025",
                end: "Present",
                logo: "images/employer/qualifica.png",
                description: "Expert STEM teacher, specialized in Artificial Intelligence and Computer Science subjects. Delivering engaging lessons, fostering critical thinking, and inspiring students to excel in the ever-evolving field of technology."
            },
            {
                name: "GreenTechSolution",
                location: "Naples, IT",
                role: "Lead Software Development Engineer",
                start: "January 2023",
                end: "May 2025",
                logo: "images/employer/gts.jpg",
                description: "Developing web-based platforms, management software. AI-based software and computer vision programs. Team-leading, team coordination and task force creation."
            },
            {
                name: "Accenture Italia",
                location: "Naples, IT",
                role: "Database Watchdog",
                start: "July 2022",
                end: "September 2022",
                logo: "images/employer/accenture.png",
                description: "Analysing the queues and solve eventual problems. Creation of remediations and medicines for high traffic queues."
            },
            {
                name: "3F&EDIN",
                location: "Naples, IT",
                role: "Software Programmer",
                start: "May 2022",
                end: "October 2022",
                logo: "images/employer/3f.png",
                description: "Intensive Course about learning how to use all the necessary tools for web development, from Angular to Java."
            },
            {
                name: "Pointel Communication S.p.A",
                location: "Naples, IT",
                role: "Full Stack Developer",
                start: "August 2021",
                end: "May 2022",
                logo: "images/employer/pointel.png",
                description: "Analysis and development of a web application that allows companies to effectively view and manage the traffic of their naval fleet, routes and ports connected to them."
            }
        ],
        collaborations: [
            {
                company: "JKJ srl",
                project: "TPAI",
                logo: "images/employer/JKJ.png",
                status: "Suspended",
                description: "Engineered and developed a full-stack web platform utilizing Flask, PHP (to be reweritten), PyTorch and other components to detect crosswalks and tactile paths for visually impaired individuals."
            },
            {
                company: "Beducci Bus Travels",
                project: "Bus Manager",
                logo: "images/employer/beducci.png",
                status: "Completed",
                description: "Developed a comprehensive web application for managing bus fleets, routes, maintenance and driver scheduling, enhancing operational efficiency."
            },
            {
                company: "Desmo Special Parts",
                project: "Desmo Special Parts E-commerce",
                logo: "images/employer/dsp.png",
                status: "Ongoing",
                description: "Developed a full-featured e-commerce platform using Django, enabling seamless online sales and inventory management for motorcycle parts."
            },
            {
                company: "Traliccio Randagio",
                project: "Web Presence & E-commerce",
                logo: "images/employer/tralicciorandagio.png",
                status: "Starting",
                description: "Building a modern web presence and e-commerce platform using React and Django to enhance brand visibility and online sales."
            }
        ],
        education: [
            { name: "University of Naples \"Parthenope\"", location: "Naples, IT", start: "2021", end: "Present", description: "BCompSc in Computer Science." },
            { name: "ITI E. Medi High School", location: "San Giorgio a Cremano, IT", start: "2018", end: "2021", description: "Graduated with 100/100." },
            { name: "Christ's Hospital School", location: "Horsham, UK", start: "2019", end: "2019", description: "English CS exchange (B2)." },
            { name: "University College Dublin", location: "Dublin, IE", start: "2018", end: "2018", description: "Economics in CS." }
        ],
        languages: [
            { name: "Italian", level: "Native", detail: "Mother tongue" },
            { name: "English", level: "C1", detail: "Current Proficiency" }
        ],
        training: [
            { name: "iOS Foundation", issuer: "Apple", date: "April 2023" },
            { name: "Cisco Cybersecurity", issuer: "Cisco", date: "March 2021" },
            { name: "Young Manager", issuer: "Plus & BC", date: "July 2018" }
        ],
        projects: [
            { title: "CoreDucati", desc: "Swift, SwiftUI, CoreData. Remote JSON fetching without middleware.", git: "https://github.com/VikSn0w/Ducati-CoreDatabike" },
            { title: "StudiSync", desc: "Exam management app. Python & Flask.", git: "https://github.com/VikSn0w/StudiSync" },
            { title: "TrigoAI", desc: "Neural networks learning Sine function. PyTorch.", git: "https://github.com/VikSn0w/TrigoAI" },
            { title: "DevBox", desc: "Utilities for coders (Bitwise, IP, etc). Swift.", git: "https://github.com/VikSn0w/DevBox" },
            { title: "MindBoggler++", desc: "Brainfuck IDE in C++.", git: "https://github.com/VikSn0w/MindBogglerCPP" },
            { title: "68k Assembly", desc: "Educational Assembly 68k programs.", git: "https://github.com/VikSn0w/68k" }
        ],
        hobbies: [
            { title: "Ducati & Motorcycles", desc: "Riding, mechanics, ECU tuning." },
            { title: "Gym & Rugby", desc: "Fitness enthusiast and player." }
        ]
    };

    const COMMANDS = [
        { cmd: 'whoami', desc: 'Display profile info', section: 'profile' },
        { cmd: 'ls', desc: 'List available sections' },
        { cmd: 'open skills', desc: 'View technical skills', section: 'skills' },
        { cmd: 'open experience', desc: 'View work history', section: 'experience' },
        { cmd: 'open education', desc: 'View academic background', section: 'education' },
        { cmd: 'open projects', desc: 'View code projects', section: 'projects' },
        { cmd: 'open training', desc: 'View certifications', section: 'training' },
        { cmd: 'open languages', desc: 'View languages', section: 'languages' },
        { cmd: 'open hobbies', desc: 'View personal interests', section: 'hobbies' },
        { cmd: 'clear', desc: 'Clear terminal screen' },
        { cmd: 'help', desc: 'Show this help message' }
    ];

    // --- COMPONENTS ---

    const Prompt = ({ user = "guest", path = "~" }) => (
        <span className="whitespace-nowrap">
                <span className="text-green-500 font-bold">{user}@vittorio-portfolio</span>
                <span className="text-white">:</span>
                <span className="text-blue-500 font-bold">{path}</span>
                <span className="text-white">$ </span>
            </span>
    );

    const SectionRenderer = ({ section }) => {
        switch(section) {
            case 'profile':
                return (
                    <div className="animate-slideUp mt-2 mb-6 border-l-2 border-green-800 pl-4">
                        <div className="flex flex-col md:flex-row gap-6 mb-4">
                            <img src={DATA.profile.avatar} className="w-32 h-32 retro-img rounded" alt="Profile" />
                            <div>
                                <h1 className="text-2xl font-bold text-white mb-1">{DATA.profile.name}</h1>
                                <div className="text-green-400 mb-2">{DATA.profile.title}</div>
                                <div className="text-sm text-gray-400 mb-1">üìç {DATA.profile.location}</div>
                                <div className="text-sm text-gray-400 mb-1">üìß {DATA.profile.email}</div>
                                <div className="text-sm text-gray-400">üì± {DATA.profile.phone}</div>
                                <div className="flex gap-4 mt-3">
                                    <a href={DATA.profile.social.github} target="_blank" className="text-blue-400 hover:text-blue-300 underline">[GitHub]</a>
                                    <a href={DATA.profile.social.linkedin} target="_blank" className="text-blue-400 hover:text-blue-300 underline">[LinkedIn]</a>
                                    <a href={DATA.profile.social.instagram} target="_blank" className="text-blue-400 hover:text-blue-300 underline">[Instagram]</a>
                                </div>
                            </div>
                        </div>
                        <p className="text-gray-300 leading-relaxed max-w-3xl mb-4">{DATA.profile.bio}</p>
                        <p className="text-gray-400 text-sm leading-relaxed max-w-3xl whitespace-pre-line">{DATA.profile.about}</p>
                    </div>
                );

            case 'skills':
                return (
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mt-2 mb-6">
                        {DATA.skills.map((s, i) => (
                            <div key={i} className="border border-green-900 bg-green-900/10 p-3 rounded hover:bg-green-900/20 transition-colors">
                                <div className="flex justify-between items-center mb-1">
                                    <span className="font-bold text-green-400">{s.name}</span>
                                    <span className="text-xs border border-green-700 px-2 py-0.5 rounded text-green-300">{s.level}</span>
                                </div>
                                <p className="text-xs text-gray-400">{s.desc}</p>
                                <div className="text-green-800 text-xs mt-2 font-mono tracking-tighter">
                                    [{'‚ñà'.repeat(s.level === 'Expert' ? 20 : s.level === 'Advanced' ? 16 : s.level === 'Academic' ? 12 : 10)}{'.'.repeat(s.level === 'Expert' ? 0 : s.level === 'Advanced' ? 4 : s.level === 'Academic' ? 8 : 10)}]
                                </div>
                            </div>
                        ))}
                    </div>
                );

            case 'experience':
                return (
                    <div className="mt-2 mb-6 space-y-6">
                        {DATA.experience.map((exp, i) => (
                            <div key={i} className="relative pl-6 border-l border-green-800/30">
                                <div className="absolute left-[-5px] top-6 w-2 h-2 bg-green-500 rounded-full"></div>

                                {/* UPDATED LAYOUT: Logo Left, Text Right */}
                                <div className="flex flex-col md:flex-row gap-4 items-start">

                                    {/* Logo Column */}
                                    {exp.logo ? (
                                        <div className="shrink-0 pt-1">
                                            <img
                                                src={exp.logo}
                                                className="w-16 h-16 object-contain bg-white/10 p-1 rounded-lg retro-img"
                                                alt={exp.name}
                                                onError={(e) => { e.target.style.display='none'; }}
                                            />
                                        </div>
                                    ) : (
                                        <div className="shrink-0 pt-1 w-16 h-16 flex items-center justify-center bg-green-900/20 rounded-lg">
                                            <Briefcase className="text-green-600 w-8 h-8" />
                                        </div>
                                    )}

                                    {/* Content Column */}
                                    <div className="flex-1 w-full">
                                        <div className="flex flex-col sm:flex-row sm:justify-between sm:items-baseline mb-1">
                                            <h3 className="text-lg font-bold text-white leading-tight">{exp.name}</h3>
                                            <span className="text-xs text-green-600 font-mono whitespace-nowrap mt-1 sm:mt-0">{exp.start} ‚Äî {exp.end}</span>
                                        </div>

                                        <div className="text-green-400 text-sm font-semibold mb-2">{exp.role}</div>
                                        <p className="text-sm text-gray-400 leading-relaxed">{exp.description}</p>
                                    </div>
                                </div>
                            </div>
                        ))}

                        <div className="pt-6 mt-8 border-t border-green-900/50">
                            <div className="flex items-center gap-2 mb-6">
                                <Handshake className="w-5 h-5 text-green-500"/>
                                <h3 className="text-white font-bold text-lg">Collaborations</h3>
                            </div>

                            <div className="grid grid-cols-1 gap-6">
                                {DATA.collaborations.map((col, i) => (
                                    <div key={i} className="flex gap-4 items-start pl-4 border-l border-gray-800 hover:border-green-800 transition-colors">
                                        {/* Collaboration Logo */}
                                        {col.logo ? (
                                            <div className="shrink-0 pt-1">
                                                <img
                                                    src={col.logo}
                                                    className="w-12 h-12 object-contain bg-white/10 p-1 rounded retro-img"
                                                    alt={col.company}
                                                    onError={(e) => { e.target.style.display='none'; }}
                                                />
                                            </div>
                                        ) : (
                                            <div className="shrink-0 pt-1 w-12 h-12 flex items-center justify-center bg-gray-800 rounded">
                                                <Handshake className="text-gray-500 w-6 h-6" />
                                            </div>
                                        )}

                                        <div className="flex-1">
                                            <div className="flex items-center gap-2 mb-1 flex-wrap">
                                                <span className="text-green-300 font-bold">{col.company}</span>
                                                <span className={`text-[10px] px-1.5 py-0.5 rounded border ${
                                                    col.status === 'Ongoing' ? 'border-green-500 text-green-400' :
                                                        col.status === 'Completed' ? 'border-blue-500 text-blue-400' :
                                                            'border-gray-600 text-gray-500'
                                                }`}>{col.status}</span>
                                            </div>
                                            <div className="text-sm text-gray-300 font-medium mb-1">{col.project}</div>
                                            <div className="text-xs text-gray-500 leading-relaxed">{col.description}</div>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                );

            case 'projects':
                return (
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-2 mb-6">
                        {DATA.projects.map((p, i) => (
                            <div key={i} className="border border-gray-800 p-4 hover:border-green-600 transition-colors group">
                                <h3 className="font-bold text-white group-hover:text-green-400 transition-colors">{p.title}</h3>
                                <p className="text-xs text-gray-400 my-2 h-12 overflow-hidden">{p.desc}</p>
                                <a href={p.git} target="_blank" className="text-xs text-blue-400 hover:underline flex items-center gap-1">
                                    git clone {p.title.toLowerCase().replace(/\s/g,'-')} <ChevronRight className="w-3 h-3"/>
                                </a>
                            </div>
                        ))}
                    </div>
                );

            case 'education':
                return (
                    <div className="mt-2 mb-6">
                        <table className="w-full text-left border-collapse">
                            <thead>
                            <tr className="border-b border-green-800 text-green-500">
                                <th className="py-2 w-1/4">Period</th>
                                <th className="py-2 w-1/3">Institution</th>
                                <th className="py-2">Details</th>
                            </tr>
                            </thead>
                            <tbody>
                            {DATA.education.map((edu, i) => (
                                <tr key={i} className="border-b border-gray-900 hover:bg-white/5 text-sm">
                                    <td className="py-3 text-gray-500 align-top">{edu.start} - {edu.end}</td>
                                    <td className="py-3 text-white align-top font-bold">{edu.name}
                                        <div className="text-xs text-gray-600 font-normal">{edu.location}</div>
                                    </td>
                                    <td className="py-3 text-gray-400 align-top">{edu.description}</td>
                                </tr>
                            ))}
                            </tbody>
                        </table>
                    </div>
                );

            case 'training':
                return (
                    <ul className="mt-2 mb-6 list-disc list-inside text-gray-300 space-y-2">
                        {DATA.training.map((t,i) => (
                            <li key={i}>
                                <span className="text-white font-bold">{t.name}</span>
                                <span className="text-gray-500 text-sm"> ‚Äî {t.issuer} ({t.date})</span>
                            </li>
                        ))}
                    </ul>
                );

            case 'languages':
                return (
                    <div className="mt-2 mb-6 flex gap-6">
                        {DATA.languages.map((l, i) => (
                            <div key={i} className="bg-white/5 p-3 rounded min-w-[150px]">
                                <div className="text-green-400 font-bold">{l.name}</div>
                                <div className="text-white text-sm">{l.level}</div>
                                <div className="text-gray-500 text-xs">{l.detail}</div>
                            </div>
                        ))}
                    </div>
                );

            case 'hobbies':
                return (
                    <div className="mt-2 mb-6 grid grid-cols-1 md:grid-cols-2 gap-4">
                        {DATA.hobbies.map((h, i) => (
                            <div key={i} className="border border-green-900 p-4">
                                <div className="flex items-center gap-2 mb-2">
                                    <Heart className="w-4 h-4 text-red-500" />
                                    <h3 className="font-bold text-white">{h.title}</h3>
                                </div>
                                <p className="text-sm text-gray-400">{h.desc}</p>
                            </div>
                        ))}
                    </div>
                );

            default:
                return <div className="text-red-500">Error: Section not found.</div>;
        }
    };

    const TerminalApp = () => {
        const [history, setHistory] = useState([]);
        const [input, setInput] = useState("");
        const [userIP, setUserIP] = useState("guest");
        const [isScrolled, setIsScrolled] = useState(false);
        const inputRef = useRef(null);
        const containerRef = useRef(null);
        const messagesEndRef = useRef(null);

        // Initial Boot Sequence
        useEffect(() => {
            const bootSequence = async () => {
                // Start fetching IP immediately
                const ipPromise = fetch('https://api.ipify.org?format=json')
                    .then(res => res.json())
                    .then(data => data.ip)
                    .catch(() => 'guest');

                const lines = [
                    { type: 'sys', text: 'Initializing kernel...' },
                    { type: 'sys', text: 'Loading modules: [react, tailwind, lucide]... OK' },
                    { type: 'sys', text: 'Mounting file system... OK' },
                    { type: 'sys', text: 'Starting Vittorio Shell v1.0.0...' },
                ];

                for (const line of lines) {
                    await new Promise(r => setTimeout(r, 100)); // Typing delay
                    setHistory(prev => [...prev, line]);
                }

                // Resolve IP
                const ip = await ipPromise;
                setUserIP(ip);

                const postBootLines = [
                    { type: 'br' },
                    { type: 'sys', text: `Connection established from ${ip}` },
                    { type: 'ascii', text: "  _    _ _ _   _             _       \n | |  | (_) | | |           (_)      \n | |  | |_| |_| |_ ___  _ __ _  ___  \n | |/\\| | | __| __/ _ \\| '__| |/ _ \\ \n \\  /\\  / | |_| || (_) | |  | | (_) |\n  \\/  \\/|_|\\__|\\__\\___/|_|  |_|\\___/ " },
                    { type: 'br' },
                    { type: 'info', text: 'Welcome to the interactive terminal portfolio.' },
                    { type: 'info', text: 'Type "help" or CLICK the links below to navigate.' },
                    { type: 'br' },
                    { type: 'command-output', cmd: 'ls', output: 'file-list' }, // Auto-run ls
                ];

                for (const line of postBootLines) {
                    await new Promise(r => setTimeout(r, 100)); // Typing delay
                    setHistory(prev => [...prev, line]);
                }
            };
            bootSequence();
        }, []);

        // Auto Scroll
        useEffect(() => {
            messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
        }, [history]);

        const handleCommand = (cmdText) => {
            const cleanCmd = cmdText.trim().toLowerCase();
            if (!cleanCmd) return;

            const newEntry = { type: 'command', text: cmdText };
            let outputEntry = null;

            if (cleanCmd === 'clear') {
                setHistory([]);
                return;
            }

            if (cleanCmd === 'help') {
                outputEntry = { type: 'output', content: (
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-2 text-sm">
                            {COMMANDS.map((c, i) => (
                                <div key={i} className="flex gap-4">
                                    <span className="text-yellow-400 w-24">{c.cmd}</span>
                                    <span className="text-gray-400">{c.desc}</span>
                                </div>
                            ))}
                        </div>
                    )};
            } else if (cleanCmd === 'ls') {
                outputEntry = { type: 'command-output', cmd: 'ls', output: 'file-list' };
            } else if (cleanCmd === 'whoami') {
                outputEntry = { type: 'section', section: 'profile' };
            } else if (cleanCmd.startsWith('open ')) {
                const section = cleanCmd.replace('open ', '');
                if (DATA[section]) {
                    outputEntry = { type: 'section', section };
                } else {
                    outputEntry = { type: 'error', text: `Error: File '${section}' not found.` };
                }
            } else if (cleanCmd.startsWith('cat ')) { // Alias for open
                const section = cleanCmd.replace('cat ', '').replace('.txt','').replace('.md','');
                if (DATA[section]) {
                    outputEntry = { type: 'section', section };
                } else {
                    outputEntry = { type: 'error', text: `Error: File '${section}' not found.` };
                }
            } else {
                outputEntry = { type: 'error', text: `Command not found: ${cleanCmd}. Type 'help' for list.` };
            }

            setHistory(prev => [...prev, newEntry, ...(outputEntry ? [outputEntry] : [])]);
        };

        const onKeyDown = (e) => {
            if (e.key === 'Enter') {
                handleCommand(input);
                setInput("");
            }
        };

        // Clickable File List Component
        const FileList = () => (
            <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mt-2 mb-4">
                {[
                    { name: 'profile.txt', cmd: 'whoami', icon: User, color: 'text-blue-400' },
                    { name: 'skills.md', cmd: 'open skills', icon: Zap, color: 'text-yellow-400' },
                    { name: 'experience.log', cmd: 'open experience', icon: Briefcase, color: 'text-purple-400' },
                    { name: 'projects.git', cmd: 'open projects', icon: FolderOpen, color: 'text-green-400' },
                    { name: 'education.doc', cmd: 'open education', icon: GraduationCap, color: 'text-pink-400' },
                    { name: 'training.crt', cmd: 'open training', icon: Award, color: 'text-orange-400' },
                    { name: 'languages.json', cmd: 'open languages', icon: Languages, color: 'text-cyan-400' },
                    { name: 'hobbies.png', cmd: 'open hobbies', icon: Heart, color: 'text-red-400' },
                ].map((file, i) => (
                    <button
                        key={i}
                        onClick={() => handleCommand(file.cmd)}
                        className="flex items-center gap-2 p-2 hover:bg-white/10 rounded text-left group transition-all"
                    >
                        <file.icon className={`w-4 h-4 ${file.color}`} />
                        <span className={`${file.color} group-hover:underline`}>{file.name}</span>
                    </button>
                ))}
            </div>
        );

        // Focus management
        const handleContainerClick = () => {
            // Only focus input if user didn't select text
            if (window.getSelection().toString().length === 0) {
                inputRef.current?.focus();
            }
        };

        return (
            <div className="fixed inset-0 flex flex-col z-0" onClick={handleContainerClick}>
                {/* Visual Effects */}
                <div className="scanlines"></div>
                <div className="crt-flicker"></div>

                {/* Header Bar */}
                <div className="bg-[#1a1a1a] text-gray-500 px-4 py-2 text-xs flex justify-between items-center border-b border-green-900/30 shrink-0 z-50">
                    <div className="flex gap-2">
                        <div className="w-3 h-3 rounded-full bg-red-500/50"></div>
                        <div className="w-3 h-3 rounded-full bg-yellow-500/50"></div>
                        <div className="w-3 h-3 rounded-full bg-green-500/50"></div>
                    </div>
                    <div className="font-mono">vittorio_picone_portfolio ‚Äî bash ‚Äî 80x24</div>
                    <div className="md:hidden text-[10px] text-green-600 animate-pulse">TOUCH ENABLED</div>
                </div>

                {/* Main Terminal Area */}
                <div className="flex-1 overflow-y-auto p-4 md:p-8 font-mono text-sm md:text-base pb-20 scroll-smooth" ref={containerRef}>
                    {history.map((entry, idx) => (
                        <div key={idx} className="mb-1 break-words">
                            {entry.type === 'command' && (
                                <div className="mt-4 mb-1">
                                    <Prompt user={userIP} />
                                    <span className="text-white">{entry.text}</span>
                                </div>
                            )}
                            {entry.type === 'sys' && <div className="text-gray-500 text-xs">[{new Date().toLocaleTimeString()}] {entry.text}</div>}
                            {entry.type === 'ascii' && <pre className="text-green-500 font-bold text-[10px] md:text-xs leading-none my-4 whitespace-pre overflow-x-hidden">{entry.text}</pre>}
                            {entry.type === 'info' && <div className="text-blue-300">{entry.text}</div>}
                            {entry.type === 'error' && <div className="text-red-500 bg-red-900/10 inline-block px-2 py-1 rounded"><AlertCircle className="w-3 h-3 inline mr-1"/>{entry.text}</div>}
                            {entry.type === 'br' && <div className="h-2"></div>}

                            {entry.type === 'command-output' && entry.output === 'file-list' && (
                                <div className="my-2">
                                    <div className="text-gray-500 mb-2">Directory listing of ~/portfolio:</div>
                                    <FileList />
                                    <div className="text-gray-600 text-xs italic">Tip: Click files to open them.</div>
                                </div>
                            )}

                            {entry.type === 'section' && <SectionRenderer section={entry.section} />}
                            {entry.type === 'output' && entry.content}
                        </div>
                    ))}

                    {/* Active Input Line */}
                    <div className="flex items-center mt-2 group">
                        <Prompt user={userIP} />
                        <input
                            ref={inputRef}
                            type="text"
                            value={input}
                            onChange={(e) => setInput(e.target.value)}
                            onKeyDown={onKeyDown}
                            className="flex-1 ml-2 bg-transparent border-none outline-none text-white typing-cursor"
                            autoFocus
                            autoComplete="off"
                            autoCorrect="off"
                            spellCheck="false"
                        />
                    </div>
                    <div ref={messagesEndRef} />
                </div>

                {/* Mobile Quick Actions (Sticky Bottom) */}
                <div className="md:hidden border-t border-green-900/30 bg-[#0a0a0a] p-2 grid grid-cols-4 gap-2 shrink-0 z-50">
                    {['ls', 'whoami', 'clear', 'help'].map(cmd => (
                        <button
                            key={cmd}
                            onClick={() => handleCommand(cmd)}
                            className="bg-green-900/20 text-green-400 border border-green-900/50 rounded py-2 text-xs uppercase font-bold active:bg-green-500 active:text-black transition-colors"
                        >
                            {cmd}
                        </button>
                    ))}
                </div>
            </div>
        );
    };

    const root = createRoot(document.getElementById('root'));
    root.render(<TerminalApp />);
</script>
</body>
</html>